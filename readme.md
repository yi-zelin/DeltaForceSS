# ⚠️ 项目状态: 主要功能完成! ⚠️

## 项目简介
哔站视频被下架了, 后续更新个 YouTube 的
这是一个以截图，鼠标模拟（即鼠标宏）来实现游戏内自动制造的程序。不会读取，更改任何游戏数据，所以不存在封号风险。利润大概 **1百50万哈弗币 / 天**  
业务逻辑大概是：截图 -> OCR 文字识别 -> 模拟鼠标，键盘输入

## 使用教程
### 1. 下载并解压dist/main.zip  
包含3个文件:  
* **config.yaml**: 数据库  
* **user_config.yaml**: 用户配置文件，包含需要制造的物品，屏幕分辨率，OCR软件路径  
* **main.exe**: 主程序，需要以管理员方式运行  

### 2. 安装OCR软件
[安装 Tesseract](https://github.com/UB-Mannheim/tesseract/wiki)

选择 install for anyone using this computer

![alt text](.img/image.png)

使用默认安装位置 ("C:\Program Files\Tesseract-OCR")

### 3. 配置用户文件
* **user_config.yaml**:
    > * `SCALE_FACTOR`: 只与游戏分辨率有关，支持全屏与无边框全屏模式  
    > * `TESSERACT_PATH`: OCR 文件的绝对路径，最后以`\tesseract.exe` 结尾  
    > * `background_mode`: 一轮运行结束会最小化游戏，长时间后台会导致游戏断开网络连接，所以默认 `False`  
    > * `debug_mode`: 保留一轮运行中的所有截图在 `../log` 文件夹中， 默认`False`就好  
    > * 建造物品，需要从 `config.yaml` 中复制  
    > ```yaml
    >    tech: 
    >    # 技术中心
    >       - 枪口 # 这个是物品所属的分类
    >       - 堡垒水平补偿器    # 这个是物品名称
    > ```
    > ![alt text](.img/image1.png)

### 4. 运行游戏
* 提前准备好无法直接购买的物品，例如：钛合金，中级子弹零件
* **打开游戏到特勤处的制造页面**（显示制造物品与剩余时间的页面）
* **管理员模式运行 main.exe 程序**（程序会自动切换到游戏界面）
* **开始挂机**（程序运行结束后有低频的哔声，之后可以切换页面以查看下次开始运行的时间或者出售仓库物品，记得切换回制造页面）

# 项目信息

## 📌 开发中
> * 文本 log

## 🚧 待完成
> * 添加快捷键

## ✅ 已完成功能
> * 更好的状态提示
> * 全物品支持
> * 聚焦与最小化
> * 根据剩余时间触发 (声音提示 + 自动聚焦)
> * dxcam 截图，直接访问显存，彻底解决截图不稳定问题
> * 16:9 的1k, 2k, 4k 屏幕适配
> * 自动制造, 收集: 自动选择匹配物品, 自动开始制造
> * 自动购买材料 (不支持兑换物品)

## 🐦 咕咕
> * 适配 720p HD：OCR 识别率不够，需要字形库
> * 适配普通窗口模式: 像素转换导致很多函数都要改，不如直接最小化

## ✔ 已修复
> * 时间检测前刚好完成物品应该直接重启
> * 截图不稳定: 概率截到纯黑 or 只有背景（win32）

## 🙃 已知问题
> * 后台时间过长可能需要重连网络，不清楚最大间隔时间
